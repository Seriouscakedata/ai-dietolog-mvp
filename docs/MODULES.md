# Описание модулей проекта

Этот документ кратко поясняет назначение основных пакетов и файлов. Благодаря ему можно быстро разобраться, какие компоненты есть в системе и кто за что отвечает.

## ai_dietolog/agents

Пакет для вспомогательных "агентов", работающих с внешними сервисами или формирующих данные.

- **profile_collector.py** – единственный на данный момент агент. Получает ответы пользователя, вычисляет нормы с помощью функций из `core.logic` и возвращает объект профиля (`core.schema.Profile`).

## ai_dietolog/bot

Код взаимодействия с Telegram:

- **telegram_bot.py** – точка входа для бота. Инициализирует приложение, регистрирует команды, обрабатывает диалог сбора профиля. Для разбора текста обращается к OpenAI и использует `agents.profile_collector` для построения профиля.

## ai_dietolog/core

Общий слой с бизнес‑логикой и моделями:

- **logic.py** – формулы расчёта БЖУ, базового и целевого расхода калорий.
- **schema.py** – Pydantic‑модели для хранения профилей, рациона на день и истории.
- **storage.py** – удобные функции чтения и записи JSON‑файлов пользователей с блокировкой.

## tests

Небольшой набор юнит‑тестов (`tests/test_compute_norms.py`) проверяет корректность расчётов в `core.logic`.

## config.json

Файл с настройками по умолчанию: токены доступа, интервалы и пороги для анализа рациона.
Ключ `use_llm_norms` задаёт, следует ли рассчитывать нормы питания через модель
OpenAI (если API‑ключ указан).

В текущей версии проекта есть один агент (`profile_collector`), отвечающий за построение пользовательского профиля. При необходимости можно добавить новые агенты в каталог `ai_dietolog/agents`.

